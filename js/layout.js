!function(){"use strict";for(var e=document.getElementsByTagName("script"),t="",r=0;r<e.length;r++){var o=e[r].src||"";if(-1!==o.indexOf("layout.js")){t=o.substring(0,o.lastIndexOf("js/layout.js"));break}}var n=document.createElement("link");n.rel="icon",n.type="image/x-icon",n.href=t+"images/favicon.ico",document.head.appendChild(n);var a=document.createElement("link");a.rel="stylesheet",a.href=t+"css/additions.css",document.head.appendChild(a);var i=document.getElementById("site-header"),c=document.getElementById("site-footer");function s(e,r){return e?fetch(t+r).then(function(e){return e.ok?e.text():(console.warn("Component load failed:",t+r,e.status),"")}).then(function(t){t&&(e.innerHTML=t)}).catch(function(e){console.warn("Component fetch error:",t+r,e)}):Promise.resolve()}Promise.all([s(i,"components/header.html"),s(c,"components/footer.html")]).then(function(){var e=document.querySelector(".nav");e&&(window.addEventListener("scroll",function(){e.classList.toggle("scrolled",window.scrollY>50)},{passive:!0}),e.classList.toggle("scrolled",window.scrollY>50));var t=window.location.pathname.split("/").pop()||"index.html";document.querySelectorAll(".nav-links a[data-page]").forEach(function(e){var r=e.getAttribute("data-page");("home"===r&&(""===t||"index.html"===t)||"about"===r&&"about.html"===t||"safety"===r&&"pool-safety.html"===t||"plans"===r&&"plans.html"===t||"inspections"===r&&"inspections.html"===t||"services"===r&&("architectural-visualization.html"===t||"forensic-visualization.html"===t||"pool-landscape-design.html"===t||"commercial-visualization.html"===t))&&e.classList.add("active")});var r=document.querySelector(".hamburger"),o=document.querySelector(".mobile-menu"),n=document.querySelector(".mobile-overlay");if(r&&o&&n){function u(){o.classList.remove("open"),n.classList.remove("open"),r.classList.remove("active"),r.setAttribute("aria-expanded","false"),document.body.style.overflow=""}r.addEventListener("click",function(){var e=o.classList.toggle("open");n.classList.toggle("open"),r.classList.toggle("active"),r.setAttribute("aria-expanded",e),document.body.style.overflow=e?"hidden":""}),n.addEventListener("click",u),o.querySelectorAll("a").forEach(function(e){e.addEventListener("click",u)})}document.querySelectorAll('a[href^="#"]').forEach(function(t){t.addEventListener("click",function(t){var r=this.getAttribute("href"),o=document.querySelector(r);if(o){t.preventDefault();var n=e?e.offsetHeight:80;window.scrollTo({top:o.getBoundingClientRect().top+window.scrollY-n,behavior:"smooth"})}})});var a=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&(e.target.classList.add("visible"),a.unobserve(e.target))})},{threshold:.1,rootMargin:"0px 0px -40px 0px"});document.querySelectorAll(".reveal, .reveal-left, .reveal-right").forEach(function(e){a.observe(e)});var i=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&(e.target.classList.add("line-visible"),i.unobserve(e.target))})},{threshold:.05});document.querySelectorAll(".section").forEach(function(e){i.observe(e)});var c=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){e.target.classList.add("video-visible");var t=e.target.querySelector("iframe[data-src]");if(t){var r=t.getAttribute("data-src");r=r.replace("autoplay=0","autoplay=1"),t.src=r,t.removeAttribute("data-src")}c.unobserve(e.target)}})},{threshold:.25,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".video-row").forEach(function(e){c.observe(e)});var s=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){var t=e.target.getAttribute("data-src");t&&(e.target.src=t,e.target.removeAttribute("data-src")),s.unobserve(e.target)}})},{rootMargin:"200px"});document.querySelectorAll("iframe[data-src]").forEach(function(e){e.closest(".video-row")||s.observe(e)});var l=document.querySelector(".hero-bg-image");if(l&&!window.matchMedia("(prefers-reduced-motion: reduce)").matches){var d=!1;window.addEventListener("scroll",function(){d||(requestAnimationFrame(function(){var e=window.scrollY;e<900&&(l.style.transform="translateY("+.35*e+"px) scale(1.05)"),d=!1}),d=!0)},{passive:!0})}})}();